guest terminal 1

sudo npm install
npm start

guest terminal 2

curl localhost:3000

or in browser on host, 127.0.0.1:4567

npm install -g nodemon

nodemon

http://getbootstrap.com/docs/3.3/getting-started/#download

create loc8r/public/bootstrap

cp css, fonts, js to above bootstrap folder

get jquery-1.11.1.min.js from book git, chapter 3 branch

get amelia theme from book github

wget -qO- https://cli-assets.heroku.com/install-ubuntu.sh | sh

  vagrant@trusty64-node:~$ heroku --version
  heroku-cli/6.14.17-790e0c0 (linux-x64) node-v8.4.0
  
git init

git add .

git commit -m "....."
  
heroku login - did not create ssh key pair?!? used password only.

can reset ssh key on heroku dashboard/settings??

  heroku keys:add gitkraken_rsa.pub
  
  heroku keys (check upload)
  
  ssh -v git@heroku.com (test)

heroku create

git push heroku master

heroku ps:scale web=1 - not necessary to run, however......

heroku open - not working from vagrant vm

heroku logs --tail

how to push repo to github from host at synched folder, same local repo as already pushed to heroku repo?

or push to multiple remote repositories from guest vm.

post Vagrantfile as a gist for each tutorial repository.

ssh stuff:

eval "$(ssh-agent -s)"

ssh-add ~/.ssh/gitkraken_rsa - change to standard id_rsa?

As of 4.1.1, routes not restful. /location/review/new. new should be view indicator not in url. new set by action post surely?

emulate mobile devices in chrome through javascript console?

Mongodb Section:

mongodb v3.2.0 installed in vagrant box used

sudo npm install --save mongoose

above installs 4.11.10, trying again to set to match book version

sudo npm uninstall mongoose

sudo npm install --save mongoose@3.8.20
  npm WARN deprecated mongodb@1.4.12: Please upgrade to 2.2.19 or higher

so revert back to latest, 4.11.10.

sudo npm uninstall mongoose

sudo npm install --save mongoose
  for some reason installed v3.9.7, so forced latest with:
  
sudo npm install --save mongoose@latest

after setting mongoose in code get the following deprecation warning:

`open()` is deprecated in mongoose >= 4.11.0, use `openUri()` instead, or set the `useMongoClient` option if using `connect()` or `createConnection()`. See http://mongoosejs.com/docs/connections.html#use-mongo-client
Mongoose connected to mongodb://localhost/Loc8r

making suggested changes.

changed from connect() to createConnection().
  now no log? mongod running?
  
Check mongod is running
  service mongod status or 
  status mongod
  
  is running
  
heroku addons:add mongolab
heroku addons:open mongolab??? from vm??
heroku config:get MONGODB_URI

Book issue: MONGODB_URI not MONGOLAB_URI. Mongoose issue, or mLab?

MONGODB_URI: mongodb://heroku_hh13p7mq:83s85868puu9n2viv3ler9s7ep@ds127994.mlab.com:27994/heroku_hh13p7mq
  
mongo ds127994.mlab.com:41082/heroku_hh13p7mq -u heroku_hh13p7mq -p 83s85868puu9n2viv3ler9s7ep
  
  vagrant@trusty64-node:/vagrant/loc8r$ mongo ds127994.mlab.com:41082/heroku_hh13p7mq -u heroku_hh13p7mq -p 83s85868puu9n2viv3ler9s7ep
  MongoDB shell version: 3.2.0
  connecting to: ds127994.mlab.com:41082/heroku_hh13p7mq
  2017-09-07T01:35:56.600+0000 W NETWORK  [thread1] Failed to connect to 54.80.99.254:41082, reason: errno:111 Connection refused
  2017-09-07T01:35:56.601+0000 E QUERY    [thread1] Error: couldn't connect to server ds127994.mlab.com:41082, connection attempt failed :
  connect@src/mongo/shell/mongo.js:226:14
  @(connect):1:6

  exception: connect failed
  
  vagrant issue? db seems to be up and running on server, and loaded schema from git push restart

testing local app against prod db:
  
  NODE_ENV=production MONGODB_URI=mongodb://heroku_hh13p7mq:83s85868puu9n2viv3ler9s7ep@ds127994.mlab.com:27994/heroku_hh13p7mq nodemon

package.json version field? increment rules? automate? SPDX?

Locations for testing:

  Two Hearted Queen:

    1201 W Roscoe Street, Chicago, IL, 60657
    
    (-87.65931890000002, 41.943331199999996)
    
    HOURS
      
      Monday – Thursday 6am–7pm
      Friday 6am–5pm
      Saturday 7am–7pm
      Sunday 7am–7pm
    
    Facilities:
    
      Hot Drinks
      Wifi
  
  Daily Grind
  
    4613 N Lincoln Ave, Chicago, IL 60625
    
    (-87.68609500000002, 41.96546499999999)
    
    HOURS
      
      Monday – Friday 6am–6pm
      Saturday 7am–6pm
      Sunday 7am–4pm
    
    Facilities:
    
      Hot Drinks
      Wifi
      Food
  
  Metropolis Coffee Company
  
    1039 West Granville Avenu, Chicago, IL 60660
    
    (-87.656998, 41.994493)
    
    HOURS
      
      Monday – Friday 6:30am–8pm
      Saturday 7am–8pm
      Sunday 7:30am–8pm
    
    Facilities:
    
      Hot Drinks
      Wifi
      Food
      
addOpeningTimes.js inserted [[....]] around instead of [....]?!? Added opening times to addCafes.js saves instead.

(mongorestore -h localhost:27017 --drop -d Loc8r ~/tmp/mongodump/Loc8r) not in specific order
      
//running update script to mongo shell
mongo localhost:27017/Loc8r ./scripts/addCafes.js
mongo localhost:27017/Loc8r ./scripts/addOpeningTimes.js - not used
mongo localhost:27017/Loc8r ./scripts/addReviews.js

migrate database to production:

mongodump -h localhost:27017 -d Loc8r -o ~/tmp/mongodump
mongorestore -h ds127994.mlab.com:41082 -d heroku_hh13p7mq --drop -u heroku_hh13p7mq -p 83s85868puu9n2viv3ler9s7ep ~/tmp/mongodump/Loc8r

restore failed
  2017-09-07T04:51:25.101+0000	Failed: error connecting to db server: no reachable servers
  
try these:

mongodump -h localhost:27017 -d Loc8r -o ~/tmp/mongodump

mongorestore -h ds127994.mlab.com:27994 -d heroku_hh13p7mq -u heroku_hh13p7mq -p 83s85868puu9n2viv3ler9s7ep ~/tmp/mongodump/Loc8r/locations.bson

mongoexport -h localhost:27017 -d Loc8r -c locations -o ~/tmp/export.json

mongoimport -h ds127994.mlab.com:41082 -d Loc8r -c locations --drop --file ~/tmp/export.json



Make api end point list for testing in a file, api_end_points.txt

Add controllerLocations.locationsList
Add conditional between locationsList and locationsListByDistance

chp7:

npm install --save request

difference from book. distance returned from mmongod for cafe location is now in m, not km.

ERROR: jquery validation in validation.js not being called.